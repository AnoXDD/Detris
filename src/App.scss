@import "./lib/base.scss";

.grid-container {
  $grid-width: 10;
  $grid-height: 20;
  $grid-cell-size: 15px;

  .grid-queue {
    display: flex;
    justify-content: center;
  }

  .grid-view, .queue-view {
    height: $grid-height * $grid-cell-size + 2px;
  }

  .grid-view {
    height: $grid-height * $grid-cell-size;

    .grid-cells {
      position: relative;
      height: $grid-height * $grid-cell-size;
      width: $grid-width * $grid-cell-size;
      border: 1px solid grey;
      overflow: hidden;
    }
  }

  .grid-cell {
    width: $grid-cell-size;
    height: $grid-cell-size;
    display: block;
    position: absolute;
    opacity: 0;
    transition: left .2s linear, top .2s linear;
    box-sizing: border-box;
    border: 1px solid white;

    &.grid-cell-color-solid {
      background-color: black;
    }

    &.detromino {
      background-color: $blue;
      z-index: 10;
    }

    @for $x from 0 through $grid-width {
      &.grid-cell-x-#{$x} {
        left: $x * $grid-cell-size;
        opacity: 1;
      }
    }
    @for $y from 0 through $grid-height {
      &.grid-cell-y-#{$y} {
        top: $y * $grid-cell-size;
        opacity: 1;
      }
    }

    &.grid-cell-preview {
      background-color: $lightgreen;
    }
  }

  .queue-view {
    $detromino-view-wrapper-padding: 5px 0;

    margin-left: 10px;
    border: 1px solid black;
    padding: 10px;
    width: 4 * $grid-cell-size + 22px;
    display: flex;
    box-sizing: border-box;
    overflow: auto;

    .detromino-view-wrapper {
      padding: $detromino-view-wrapper-padding;
      width: 4 * $grid-cell-size;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .detromino-animation-leave, .detromino-animation-enter.detromino-animation-enter-active {
      opacity: 1;
      height: 2 * $grid-cell-size;
      padding: $detromino-view-wrapper-padding;
      transition: .2s ease;
    }

    .detromino-animation-leave.detromino-animation-leave-active, .detromino-animation-enter {
      opacity: 0;
      height: 0;
      padding: 0;
      transition: .2s ease;
    }
  }

  .detromino-preview {
    width: 3 * $grid-cell-size;
    height: 2 * $grid-cell-size;
    position: relative;

    &.detromino-preview-I {
      width: 4 * $grid-cell-size;
      // Kinda hacky to place it at the right position
      position: relative;
      top: 0.5 * $grid-cell-size;
    }

    &.detromino-preview-O {
      width: 2 * $grid-cell-size;
    }
  }
}