@import "./lib/base.scss";

.grid-container {
  $grid-width: 10;
  $grid-height: 20;
  $grid-cell-size: 15px;

  .grid-queue {
    display: flex;
    justify-content: center;
  }

  .grid-view, .queue-view {
    height: $grid-height * $grid-cell-size + 2px;
  }

  .grid-view {
    height: $grid-height * $grid-cell-size;

    .grid-cells {
      position: relative;
      height: $grid-height * $grid-cell-size;
      width: $grid-width * $grid-cell-size;
      border: 1px solid grey;
      overflow: hidden;
    }
  }

  .grid-cell {
    width: $grid-cell-size;
    height: $grid-cell-size;
    display: block;
    position: absolute;
    opacity: 0;
    transition: left .2s linear, top .2s linear;
    box-sizing: border-box;
    border: 1px solid white;

    &.grid-cell-color-solid {
      background-color: black;
    }

    &.detromino {
      background-color: $blue;
      z-index: 10;
    }

    &.stale {
      background-color: $red;
    }

    &.grid-cell-animation-leave {
      background-color: $red;
      opacity: 1;
      transform: scale(1);
      transition: 1s linear;
      z-index: 10;

      &.grid-cell-animation-leave-active {
        opacity: 0;
        transform: scale(2);
      }
    }

    @for $x from 0 through $grid-width {
      &.grid-cell-x-#{$x} {
        left: $x * $grid-cell-size;
        opacity: 1;
      }
    }
    @for $y from 0 through $grid-height {
      &.grid-cell-y-#{$y} {
        top: $y * $grid-cell-size;
        opacity: 1;
      }
    }

    &.grid-cell-preview {
      background-color: $lightgreen;
      transition: background-color .2s linear;
    }
  }

  .queue-view {
    $detromino-view-wrapper-padding: 5px;

    margin-left: 10px;
    width: 4 * $grid-cell-size + 22px;
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
    overflow: hidden;

    .next {
      flex-shrink: 0;

      .next-inner {
        height: 2 * ($grid-cell-size + $detromino-view-wrapper-padding);
      }

      .detromino-view-wrapper {
        position: absolute;
      }

      .detromino-animation-leave, .detromino-animation-enter.detromino-animation-enter-active {
        opacity: 1;
        transform: scale(1);
        padding: $detromino-view-wrapper-padding 0;
        transition: .2s ease;
      }

      .detromino-animation-leave.detromino-animation-leave-active, .detromino-animation-enter {
        opacity: 0;
        transform: scale(0.2);
        padding: 0;
        transition: .2s ease;
      }
    }

    .queue {
      flex: 1 1 auto;
      overflow: hidden;
      position: relative;

      .queue-flex-inner-extend-wrapper {
        height: 100%;
        width: 100%;
      }

      .queue-inner {
        height: 100%;
        overflow: auto;
      }

      .detromino-animation-leave, .detromino-animation-enter.detromino-animation-enter-active {
        opacity: 1;
        height: 2 * $grid-cell-size;
        padding: $detromino-view-wrapper-padding 0;
        transition: .2s ease;
      }

      .detromino-animation-leave.detromino-animation-leave-active, .detromino-animation-enter {
        opacity: 0;
        height: 0;
        padding: 0;
        transition: .2s ease;
      }
    }

    .detromino-view-wrapper {
      padding: $detromino-view-wrapper-padding 0;
      width: 4 * $grid-cell-size;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
  }

  .detromino-preview {
    width: 3 * $grid-cell-size;
    height: 2 * $grid-cell-size;
    position: relative;

    &.detromino-preview-I {
      width: 4 * $grid-cell-size;
      // Kinda hacky to place it at the right position
      position: relative;
      top: 0.5 * $grid-cell-size;
    }

    &.detromino-preview-O {
      width: 2 * $grid-cell-size;
    }
  }
}

.title-box-view {
  $padding: 10px 5px 5px;

  padding: $padding;
  position: relative;
  height: 100%;
  box-sizing: border-box;

  .title-box-view-title {
    content: "dummy";
    text-transform: uppercase;
    position: absolute;
    top: 0;
    left: 0;
    background: white;
    z-index: 10;
    line-height: 20px;
    font-size: 13px;
    padding-right: 2px;
  }

  .title-box-view-actual {
    border: 1px solid black;
    padding: $padding;
    height: 100%;
    box-sizing: border-box;
  }
}